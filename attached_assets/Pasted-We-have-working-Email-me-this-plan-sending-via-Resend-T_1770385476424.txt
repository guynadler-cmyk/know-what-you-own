We have working “Email me this plan” sending via Resend. The current email is too plain. I want a premium, polished HTML email with better typography, spacing, and a strong CTA that brings users back to the stock’s analysis page.

Goals

Make the email feel premium/expensive (clean layout, subtle shadow, spacing, section headers, modern typography).

Include a primary CTA button linking back to the stock’s analysis page.

Include a secondary CTA to open Strategy directly (edit plan).

Avoid confusing language like “1/4 strong” in the email. Prefer plain-English summaries (the same takeaway lines shown on the Strategy page).

Ensure the email renders well in Gmail and mobile (table-based layout, inline CSS, max width 640px).

What to change
A) Find the backend email sending code

Locate the endpoint / function that sends the strategy email (likely POST /api/strategy-email) and the code that constructs subject, html, and from/to.

Refactor so HTML is generated by a function like:

renderStrategyEmail({ plan, company, links }) => string

B) Build a premium email template (table layout + inline styles)

Implement HTML email with this structure:

1) Header

Left: “restnvest”

Right: created date

Minimal and clean

2) Hero / Title block

Title: “Your {{TICKER}} Strategy Plan”

Subtitle: Company name (if available)

A short 1–2 sentence line: “Here’s the plan you created in restnvest. You can revisit your research and update your steps anytime.”

3) CTA Row

Add two buttons:

Primary button (filled): Reopen the full analysis → linking to analysisUrl

Secondary button (outline): Edit this plan linking to strategyUrl

4) Research Takeaways (read-only)

Show 3 compact rows/cards:

Performance takeaway text (plain-English)

Valuation takeaway text (plain-English)

Timing takeaway text (plain-English)

Do NOT show “X/Y strong/sensible/supportive” as the headline. If you include the counts at all, make them secondary and non-confusing (“3 of 4 signals positive”), but ideally omit counts and just show the plain takeaway lines.

5) Plan Summary

Show:

Conviction label + value

Total amount formatted with commas

Tranches table:

Step (Tranche 1, etc.)

Amount (formatted)

Revisit (WHEN)

Condition (GATE or “—”)

6) “I’m wrong if…”

Show in a highlighted box with warm background, readable.

7) Footer

Include:

A lightweight disclaimer: “restnvest provides research tools and planning structure, not investment advice.”

Optional: “Reply to this email if you want to share feedback.”

Links (very important)

Add links based on the app’s actual routes.

analysisUrl should deep-link to the ticker’s analysis page (the main analysis experience users used before Strategy). Use the real route in this codebase (search routing for ticker pages).

strategyUrl should deep-link to the Strategy stage for the same ticker.

If you don’t have a public base URL, use an env var like PUBLIC_APP_URL (or APP_URL) and create it if missing:

In production, it should be your deployed URL.

In dev, fallback to something sensible.

Example:

const baseUrl = process.env.PUBLIC_APP_URL || process.env.APP_URL || "http://localhost:3000";
const analysisUrl = `${baseUrl}/stock/${ticker}`;
const strategyUrl = `${baseUrl}/stock/${ticker}?stage=strategy`;


(Adjust paths to match the repo’s actual routes.)

Formatting requirements

Currency: always formatted with commas $10,000

Dates: short human format (e.g., Feb 6, 2026)

HTML email must use inline CSS and table layout for compatibility.

Avoid external fonts (use system fonts).

Keep max width 640px and center the container on a light gray background.

Use subtle border radius and shadow to feel premium.

Deliverables

Updated email HTML template (premium).

Email now includes CTA link back to analysis page + edit plan.

Takeaways in email use plain-English lines (not “1/4 strong”).

Confirm by sending a test email to yourself and screenshot the result.